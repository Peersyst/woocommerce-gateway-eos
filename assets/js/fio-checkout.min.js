!function(o){var t={init:function(){o.initialize("#fio-qr",function(){o("#fio-form").length&&(this.form=o("#fio-form"),this.email=this.form.data("email"),this.amount=this.form.data("amount"),this.currency=this.form.data("currency"),this.fioAddress=this.form.data("fio-address"),this.fioAmount=this.form.data("fio-amount"),this.fioRef=this.form.data("fio-ref"),this.infoWrapper="#fio-info",this.amountWrapper="#fio-amount-wrapper",this.process="#fio-process"),this.paymentData={v:wc_fio_params.test?1:2,type:2,data:{addr:this.fioAddress.toUpperCase().replace(/-/g,""),amount:1e6*this.fioAmount,msg:this.fioRef,name:"FIO payment to "+wc_fio_params.store}},new QRCode("fio-qr",{text:JSON.stringify(this.paymentData),size:256,fill:"#000",quiet:0,ratio:2}),o("div.payment_box.payment_method_fio").is(":visible")?o("#place_order").attr("disabled",!0):o("#place_order").attr("disabled",!1),o(".wc_payment_methods  > li").on("click",'input[name="payment_method"]',function(){o(this).is("#payment_method_fio")?o("#place_order").attr("disabled",!0):o("#place_order").attr("disabled",!1)});var a={classname:"nanobar-fio",id:"fio-nanobar",target:document.getElementById("fio-process")};t.nanobar=new Nanobar(a)})},updateFioAmount:function(){this.ajaxGetFioAmount().done(function(t){console.log(t),!0===t.success&&t.data.amount>0&&o(this.amountWrapper).text(t.data.amount)})},checkForFioPayment:function(){this.nanobar.go(25),console.log("checking"),o.ajax({url:wc_fio_params.wc_ajax_url,type:"post",data:{action:"woocommerce_check_for_payment",nounce:wc_fio_params.nounce}}).then(function(a){console.log(a),console.log("Match: "+a.data.match),!0===a.success&&!0===a.data.match&&(o("#place_order").attr("disabled",!1),o("#place_order").trigger("click")),setTimeout(function(){t.checkForFioPayment()},5e3)}).fail(function(o){console.log("epic fail"),console.log(o)}),this.nanobar.go(100)},ajaxGetFioAmount:function(){return o.ajax({url:wc_fio_params.wc_ajax_url,type:"post",data:{action:"woocommerce_get_fio_amount",nounce:wc_fio_params.nounce}})}};t.init(),setTimeout(function(){t.checkForFioPayment()},5e3)}(jQuery);
//# sourceMappingURL=maps/fio-checkout.min.js.map
