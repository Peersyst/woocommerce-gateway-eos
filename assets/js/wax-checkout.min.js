!function(a){var t={init:function(){a.initialize("#wax-qr",function(){a("#wax-form").length&&(this.form=a("#wax-form"),this.email=this.form.data("email"),this.amount=this.form.data("amount"),this.currency=this.form.data("currency"),this.waxAddress=this.form.data("wax-address"),this.waxAmount=this.form.data("wax-amount"),this.waxRef=this.form.data("wax-ref"),this.infoWrapper="#wax-info",this.amountWrapper="#wax-amount-wrapper",this.process="#wax-process"),a("#wax-pay-button").on("click",function(){t.payWithWax(this.waxAddress,this.waxAmount,this.waxRef)}.bind(this)),a("div.payment_box.payment_method_wax").is(":visible")?a("#place_order").attr("disabled",!0):a("#place_order").attr("disabled",!1),a(".wc_payment_methods  > li").on("click",'input[name="payment_method"]',function(){a(this).is("#payment_method_wax"),a("#place_order").attr("disabled",!1)});var n={classname:"nanobar-wax",id:"wax-nanobar",target:document.getElementById("wax-process")};t.nanobar=new Nanobar(n)})},payWithWax:function(a,n,o){var e=new waxjs.WaxJS("https://wax.greymass.com",null,null,!1);e.login().then(function(i){e.api.transact({actions:[{account:"eosio.token",name:"transfer",authorization:[{actor:e.userAccount,permission:"active"}],data:{from:e.userAccount,to:a,quantity:n.toFixed(8)+" WAX",memo:o}}]},{blocksBehind:3,expireSeconds:1200}).then(function(a){console.log("transaction result ->",a),t.showPendingToConfirm()})})},showPendingToConfirm:function(){},updateWaxAmount:function(){this.ajaxGetWaxAmount().done(function(t){console.log(t),!0===t.success&&t.data.amount>0&&a(this.amountWrapper).text(t.data.amount)})},checkForWaxPayment:function(){this.nanobar.go(25),a.ajax({url:wc_wax_params.wc_ajax_url,type:"post",data:{action:"woocommerce_check_for_payment",nounce:wc_wax_params.nounce}}).done(function(n){a("#wax-check").html('<p id="wax-check">Checking..</p>'),!0===n.success&&!0===n.data.match&&(a("#place_order").attr("disabled",!1),a("#place_order").trigger("click")),setTimeout(function(){t.checkForWaxPayment()},5e3)}),this.nanobar.go(100)},ajaxGetWaxAmount:function(){return a.ajax({url:wc_wax_params.wc_ajax_url,type:"post",data:{action:"woocommerce_get_wax_amount",nounce:wc_wax_params.nounce}})}};t.init(),setTimeout(function(){t.checkForWaxPayment()},5e3)}(jQuery);
//# sourceMappingURL=maps/wax-checkout.min.js.map
